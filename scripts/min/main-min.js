$(document).ready(function(){function o(){return $("input:radio[name=option]:checked").val()}function e(){return $("#progressive").is(":checked")?!0:!1}function n(){return $("#continuous").is(":checked")?!0:!1}function c(o){$(o).css("background-color","#"+Math.floor(16777215*Math.random()).toString(16))}function i(o,e){$(o).css("background-color",e)}function t(o){return o=o.split("rgb(")[1].split(")")[0],o=o.replace(/ /g,"").split(","),o[0]=o[0]-25<0?0:o[0]-25,o[1]=o[1]-25<0?0:o[1]-25,o[2]=o[2]-25<0?0:o[2]-25,"rgb("+o[0]+", "+o[1]+", "+o[2]+")"}function s(o,e){$(o).css("background",t(e))}function r(o){$(document).on(o,".square",function(){c(this)})}function u(o,e){$(document).on(o,".square",function(){i(this,e)})}function a(e){$(document).on(e,".square",function(){var e=$(this).css("background-color");e.indexOf("rgba")>-1?"1"==o()?c(this):i(this,"#"+$(".jscolor").val()):s(this,e)})}function l(){$(document).off("mouseenter",".square"),$(document).off("click",".square");var c=o();e()?a(n()?"mouseenter":"click"):n()?"1"==c?r("mouseenter"):u("mouseenter","#"+$(".jscolor").val()):"1"==c?r("click"):u("click","#"+$(".jscolor").val())}function d(){$(".square").remove()}function f(){var o=$("#grid-size").val(),e=512/o,n="";if(o>256)$(".validateInput").text("The maximum size is 256").addClass("ui-state-highlight"),setTimeout(function(){$(".validateInput").removeClass("ui-state-highlight",1500)},500);else{d();for(var c=0;o>c;c++)n+='<div class="square border"></div>';for(c=0;o>c;c++)$(".container").append(n);$(".square").css({width:e,height:e}),g.dialog("close"),$("#grid-size").val("")}}for(var h=0;1024>h;h++)$(".container").append('<div class="square border"></div>');$(function(){$(document).tooltip()}),r("mouseenter"),$("input:radio[name=option]").click(function(){l()}),$("#progressive").on("click",function(){l()}),$("#continuous").on("click",function(){l()}),$(".jscolor").on("change",function(){l()}),$(".jscolor").on("click",function(){$("#color").prop("checked",!0),l()}),$(".show-hide-grid").click(function(){$(".square").toggleClass("border")}),$(".reset-btn").click(function(){$(".square").css("background-color","rgba(255,255,255,.7)")}),$("#grid-size").keyup(function(){this.value!==this.value.replace(/[^0-9\.]/g,"")&&(this.value=this.value.replace(/[^0-9\.]/g,""));var o=$("#grid-size").val();$("#total-squares").text(o>1?o*o+" squares":"1 square")});var g=$("#customize-dialog").dialog({autoOpen:!1,height:300,widht:350,modal:!0,buttons:{"Update grid":f,Cancel:function(){g.dialog("close")}},close:function(){$("#grid-size").val("")}});$(".customize-btn").click(function(){$("#total-squares").text(""),g.dialog("open")}),$(document).keydown(function(o){67==o.which&&($("#continuous").is(":checked")?$("#continuous").prop("checked",!1):$("#continuous").prop("checked",!0),l())}),$(document).keydown(function(o){80==o.which&&($("#progressive").is(":checked")?$("#progressive").prop("checked",!1):$("#progressive").prop("checked",!0),l())})});